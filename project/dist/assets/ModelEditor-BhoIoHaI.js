import{c as u,r as d,j as e,X as O}from"./index-Cmd-lEEZ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=u("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=u("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=u("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=u("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var x=(a=>(a.COMPLETE_STATIC="完全信息静态博弈",a.COMPLETE_DYNAMIC="完全信息动态博弈",a.INCOMPLETE_STATIC="不完全信息静态博弈",a.INCOMPLETE_DYNAMIC="不完全信息动态博弈",a))(x||{});const H=[{id:"prisoners-dilemma",name:"囚徒困境",type:"完全信息静态博弈",description:"两个囚徒面临是否合作的选择。如果双方都合作，各判1年；如果双方都背叛，各判2年；如果一方合作一方背叛，合作方判3年，背叛方释放。这是一个经典的非合作博弈模型，展示了个体理性与集体理性的冲突。在这个博弈中，背叛是占优策略，但如果双方都选择背叛，结果反而比双方都合作更差。",players:[{id:1,name:"囚徒A",strategies:["合作","背叛"]},{id:2,name:"囚徒B",strategies:["合作","背叛"]}],payoffMatrix:{"合作,合作":[-1,-1],"合作,背叛":[-3,0],"背叛,合作":[0,-3],"背叛,背叛":[-2,-2]},isClassic:!0},{id:"smart-pig",name:"智猪博弈",type:"完全信息静态博弈",description:"两头猪面对一个按钮和食物。按按钮可以获得食物，但需要走到按钮位置。如果一头猪按按钮，另一头猪可以更快地吃到食物。这个博弈模型展示了搭便车行为，当一方付出成本产生公共利益时，另一方可以不付出成本就获得收益。在现实中，这种情况常见于公共资源的使用和团队协作中。",players:[{id:1,name:"猪A",strategies:["按按钮","等待"]},{id:2,name:"猪B",strategies:["按按钮","等待"]}],payoffMatrix:{"按按钮,按按钮":[2,2],"按按钮,等待":[1,4],"等待,按按钮":[4,1],"等待,等待":[0,0]},isClassic:!0},{id:"stackelberg",name:"斯塔克伯格模型",type:"完全信息动态博弈",description:"一个市场中的两个企业，领导者先决定产量，跟随者观察后决定自己的产量。这是一个经典的产业组织理论模型，展示了市场中先行者优势。领导者通过先决策来影响跟随者的选择，从而获得更大的市场份额和利润。这个模型在寡头市场竞争分析中有重要应用。",players:[{id:1,name:"领导者",strategies:["高产量","低产量"]},{id:2,name:"跟随者",strategies:["高产量","低产量"]}],payoffMatrix:{"高产量,高产量":[3,1],"高产量,低产量":[5,2],"低产量,高产量":[2,3],"低产量,低产量":[4,4]},isClassic:!0},{id:"entry-deterrence-complete",name:"市场进入阻挠博弈(完全信息)",type:"完全信息动态博弈",description:"一个在位企业面对潜在进入者的威胁。在位者可以选择是否进行市场投资以阻止进入，潜在进入者观察在位者的行动后决定是否进入市场。这个完全信息版本中，各方了解对方的所有信息和可能的策略选择。",players:[{id:1,name:"在位者",strategies:["投资","不投资"]},{id:2,name:"进入者",strategies:["进入","不进入"]}],payoffMatrix:{"投资,进入":[-1,-1],"投资,不进入":[1,0],"不投资,进入":[0,2],"不投资,不进入":[2,0]},isClassic:!0},{id:"entry-deterrence-incomplete",name:"市场进入阻挠博弈(不完全信息)",type:"不完全信息静态博弈",description:"与完全信息版本类似，但进入者不确定在位者的成本类型（高成本或低成本）。这种信息不对称性使得进入者需要根据在位者的行为推测其类型，从而做出进入决策。",players:[{id:1,name:"在位者",strategies:["投资","不投资"]},{id:2,name:"进入者",strategies:["进入","不进入"]}],payoffMatrix:{"投资,进入":[-1,-1],"投资,不进入":[1,0],"不投资,进入":[0,2],"不投资,不进入":[2,0]},isClassic:!0},{id:"insurance-market",name:"保险市场逆向选择模型",type:"不完全信息静态博弈",description:"保险公司面对高风险和低风险两类客户，但无法区分客户类型。保险公司提供不同的保险合约，客户根据自身风险类型选择是否购买保险。这个模型展示了信息不对称如何影响市场效率。",players:[{id:1,name:"保险公司",strategies:["高保费","低保费"]},{id:2,name:"客户",strategies:["购买","不购买"]}],payoffMatrix:{"高保费,购买":[2,1],"高保费,不购买":[0,2],"低保费,购买":[1,2],"低保费,不购买":[0,1]},isClassic:!0},{id:"signaling-game",name:"信号传递博弈",type:"不完全信息动态博弈",description:"一个求职者（发送者）了解自己的能力类型，而雇主（接收者）不了解。求职者可以通过教育投资作为信号传递自己的能力。这个模型展示了如何通过可观察的行动来传递私人信息。",players:[{id:1,name:"求职者",strategies:["高教育投资","低教育投资"]},{id:2,name:"雇主",strategies:["高薪聘用","低薪聘用"]}],payoffMatrix:{"高教育投资,高薪聘用":[3,2],"高教育投资,低薪聘用":[0,1],"低教育投资,高薪聘用":[4,-1],"低教育投资,低薪聘用":[2,1]},isClassic:!0}],q=({model:a,onSave:N,onCancel:g,isCustom:o=!1})=>{const[h,v]=d.useState((a==null?void 0:a.name)||""),[b,w]=d.useState((a==null?void 0:a.type)||x.COMPLETE_STATIC),[p,C]=d.useState((a==null?void 0:a.description)||""),[n,l]=d.useState((a==null?void 0:a.players)||[{id:1,name:"玩家1",strategies:["策略A"]},{id:2,name:"玩家2",strategies:["策略A"]}]),[m,f]=d.useState((a==null?void 0:a.payoffMatrix)||{});d.useEffect(()=>{M()},[n]);const M=()=>{const s={},t=(r,i)=>{if(i===n.length){const c=r.join(",");s[c]=m[c]||Array(n.length).fill(0);return}n[i].strategies.forEach(c=>{t([...r,c],i+1)})};t([],0),f(s)},k=()=>{if(n.length<4){const s=Math.max(...n.map(t=>t.id))+1;l([...n,{id:s,name:`玩家${s}`,strategies:["策略A"]}])}},S=s=>{n.length>2&&l(n.filter(t=>t.id!==s))},E=s=>{l(n.map(t=>t.id===s?{...t,strategies:[...t.strategies,`策略${String.fromCharCode(65+t.strategies.length)}`]}:t))},P=(s,t)=>{l(n.map(r=>{if(r.id===s&&r.strategies.length>1){const i=[...r.strategies];return i.splice(t,1),{...r,strategies:i}}return r}))},A=(s,t,r)=>{l(n.map(i=>{if(i.id===s){const c=[...i.strategies];return c[t]=r,{...i,strategies:c}}return i}))},T=(s,t)=>{l(n.map(r=>r.id===s?{...r,name:t}:r))},I=(s,t,r)=>{const i=[...m[s]];i[t]=Number(r),f({...m,[s]:i})},L=s=>{s.preventDefault();const t={id:(a==null?void 0:a.id)||crypto.randomUUID(),name:h,type:b,description:p,players:n,payoffMatrix:m,isClassic:!1};N(t)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("form",{onSubmit:L,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:o?"创建自定义模型":"编辑模型参数"}),e.jsx("button",{type:"button",onClick:g,className:"text-gray-500 hover:text-gray-700",children:e.jsx(O,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"模型名称"}),e.jsx("input",{type:"text",value:h,onChange:s=>v(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"博弈类型"}),e.jsx("select",{value:b,onChange:s=>w(s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:!o,children:Object.values(x).map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"模型描述"}),e.jsx("textarea",{value:p,onChange:s=>C(s.target.value),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"参与者设置"}),o&&e.jsxs("button",{type:"button",onClick:k,disabled:n.length>=4,className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 disabled:opacity-50",children:[e.jsx(j,{className:"w-4 h-4"}),"添加参与者"]})]}),e.jsx("div",{className:"space-y-4",children:n.map((s,t)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"参与者名称"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>T(s.id,r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),o&&n.length>2&&e.jsx("button",{type:"button",onClick:()=>S(s.id),className:"ml-4 text-red-600 hover:text-red-700",children:e.jsx(y,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"可选策略"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[s.strategies.map((r,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:c=>A(s.id,i,c.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsx("button",{type:"button",onClick:()=>P(s.id,i),className:"text-red-600 hover:text-red-700",disabled:s.strategies.length===1,children:e.jsx(y,{className:"w-4 h-4"})})]},i)),e.jsxs("button",{type:"button",onClick:()=>E(s.id),className:"flex items-center gap-1 text-blue-600 hover:text-blue-700",children:[e.jsx(j,{className:"w-4 h-4"}),"添加策略"]})]})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"收益矩阵"}),e.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700",title:"收益矩阵说明",children:e.jsx(D,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-200 px-4 py-2 bg-gray-50",children:"策略组合"}),n.map(s=>e.jsxs("th",{className:"border border-gray-200 px-4 py-2 bg-gray-50",children:[s.name,"收益"]},s.id))]})}),e.jsx("tbody",{children:Object.entries(m).map(([s,t])=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-200 px-4 py-2 font-medium",children:s}),t.map((r,i)=>e.jsx("td",{className:"border border-gray-200 px-4 py-2",children:e.jsx("input",{type:"number",value:r,onChange:c=>I(s,i,c.target.value),className:"w-full border-0 focus:ring-0",step:"0.1"})},i))]},s))})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"取消"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),o?"创建模型":"保存修改"]})]})]})})})};export{H as C,x as G,q as M,j as P,_ as S};
